@model Scanner.Models.CoilSlits
@{
    ViewBag.Title = "Coil Slit";
    Layout = "~/Views/Shared/_Layout.cshtml";
    var loginUserName = ((Scanner.Models.User)Session["User"]).FirstName + " " + ((Scanner.Models.User)Session["User"]).LastName;
}
<style type="text/css" id="custom-background-css">
    body.custom-background {
        background-color: #eaf6ff;
    }
</style>
<table class="bodyTable">
    <tr>
        <td style="width:300px;vertical-align:top;">
            <div class="sideMenuDiv">
                @Html.Partial("_SideMenuPanel")
            </div>
        </td>
        <td valign="top">
            @Html.Partial("_PageTitlePanel")
            <div class="col-md-12" style="width:1450px; border-bottom: 1px solid;">
                <table class="col-md-4">
                    <tr>
                        <td style="font-size:25px;" class="editor-label">
                            Coil ID Scanned
                        </td>
                    </tr>
                    <tr>
                        <td class="editor-field">
                            @Html.TextBoxFor(model => model.input, new { style = "width: 350px; height:50px;" })
                        </td>
                    </tr>
                    <tr>
                        <td style="font-size:20px;">Please press Tab button to display data</td>
                    </tr>
                </table>
                @if (@Model.input != null)
                {
                <table class="col-md-4" style="font-size:20px;">
                    <tr><td><b>Coil ID:</b> @Html.TextBoxFor(model => model.CoilDetails[0].COILID, new { @readonly = true })</td></tr>
                    <tr><td><b>Type:</b> @Model.CoilDetails[0].TYPE.ToString()</td></tr>
                    <tr><td><b>Color:</b> @Model.CoilDetails[0].COLOR.ToString()</td></tr>
                    <tr><td><b>Weight:</b> @Model.CoilDetails[0].WEIGHT.ToString()</td></tr>
                    <tr><td><b>Gauge:</b> @Model.CoilDetails[0].GAUGE.ToString()</td></tr>
                    <tr><td><b>Width:</b> @Model.CoilDetails[0].WIDTH.ToString()</td></tr>
                    <tr><td><b>Order:</b> @Model.CoilDetails[0].ORDER.ToString()</td></tr>
                    <tr>
                        <td>
                            <b>p_order:</b>
                            @if (@Model.CoilDetails[0].P_ORDER != null)
                            {@Model.CoilDetails[0].P_ORDER.ToString()}
                        </td>
                    </tr>
                </table>
                <table class="col-md-4" style="font-size:20px;">
                    <tr>
                        <td>
                            <b>Month_Recd:</b>
                            @if (@Model.CoilDetails[0].MONTH_RECD != null)
                            {@Model.CoilDetails[0].MONTH_RECD.ToString()}
                        </td>
                    </tr>
                    <tr><td><b>Date_inwh:</b> @Model.CoilDetails[0].DATE_INWH.ToString()</td></tr>
                    <tr><td><b>Date_Transfer:</b> @Model.CoilDetails[0].DATE_TRANSFER.ToString()</td></tr>
                    <tr><td><b>Last StockTake Date:</b> @Model.CoilDetails[0].LAST_STOCKTAKE_DATE.ToString()</td></tr>
                    <tr>
                        <td>
                            <b>Status:</b>
                            @if (@Model.CoilDetails[0].STATUS != null)
                            {@Model.CoilDetails[0].STATUS.ToString()}
                        </td>
                    </tr>
                    <tr><td><b>Clength:</b> @Model.CoilDetails[0].CLENGTH.ToString()</td></tr>
                    <tr>
                        <td>
                            <b>ZincCoat:</b>
                            @if (@Model.CoilDetails[0].ZINCCOAT != null)
                            {@Model.CoilDetails[0].ZINCCOAT.ToString()}
                        </td>
                    </tr>
                </table>
                }
            </div>
            <div class="col-md-4" style="font-size:20px;">
                @if (Model.input != null && Model.CoilDetails[0].TYPE == "SM")
                {
                    <p>Number of Slits:</p>
                
                    var number_0 = (Model.slitNumber == 0) ? "selected " : "";
                    var number_2 = (Model.slitNumber == 2) ? "selected " : "";
                    var number_4 = (Model.slitNumber == 4) ? "selected " : "";
                    var number_6 = (Model.slitNumber == 6) ? "selected " : "";
                    var number_8 = (Model.slitNumber == 8) ? "selected " : "";

                
                    <select name="slitNumber" id="slitNumber" style="height:28px; width:100px; font-size:14px;" onchange="reloadSlit()">
                        <option value=0 @number_0>Please select Number:</option>
                        <option value=2 @number_2>2</option>
                        <option value=4 @number_4>4</option>
                        <option value=6 @number_6>6</option>
                        <option value=8 @number_8>8</option>
                    </select>
                    <p>Slit Width:</p>
                
                    var width_cover_51 = (Model.slitWidth == 51) ? "selected " : "";
                    var width_cover_67 = (Model.slitWidth == 67) ? "selected " : "";
                    var width_cover_92 = (Model.slitWidth == 92) ? "selected " : "";
                    var width_base_67 = (Model.slitWidth == 67) ? "selected " : "";
                    var width_base_83 = (Model.slitWidth == 83) ? "selected " : "";
                    var width_base_108 = (Model.slitWidth == 108) ? "selected " : "";

                
                    <select name="slitWidth" id="slitWidth" style="height:28px; width:100px; font-size:14px;" onchange="reloadSlit()">
                        <option value=0>Please select width:</option>
                        <option value=51 @width_cover_51>51 mm Cover</option>
                        <option value=67 @width_cover_67>67 mm Cover</option>
                        <option value=92 @width_cover_92>92 mm Cover</option>
                        <option value=67 @width_base_67>67 mm Base</option>
                        <option value=83 @width_base_83>83 mm Base</option>
                        <option value=108 @width_base_108>108 mm Base</option>
                    </select>
                }
            </div>
            <div class="col-md-8" style="font-size:20px;">
                @if (@Model.input != null)
                {
                    <table class="col-md-2" style="font-size:20px;">
                        <tr><td>New Coil Slit ID: </td></tr>
                        @if (Model.CoilSlitIDs != null)
                        {
                            for (int i = 0; i < Model.CoilSlitIDs.Count; i++)
                            {
                                <tr><td>@Model.CoilSlitIDs[i]&nbsp;&nbsp;</td></tr>
                            }
                        }
                    </table>
                    <table class="col-md-3" style="font-size:20px;">
                        <tr><td>New Coil Slit Label: </td></tr>
                        @if (Model.CoilSlitLabels != null)
                        {
                            for (int i = 0; i < Model.CoilSlitLabels.Count; i++)
                            {
                                <tr><td>@Model.CoilSlitLabels[i]&nbsp;&nbsp;</td></tr>
                            }
                        }
                    </table>
                    <table class="col-md-3">
                        <tr><td>Number of Labels: </td><td>@ViewBag.LabelNumber</td></tr>
                    </table>
                    <input type="submit" id="PRINT" value="PRINT" class="btn btn-primary btn-lg" style="height:40px; width: 100px; margin-bottom:10px;margin-top:10px; float:right;" onclick="PrintSlitLabel()" />
                    <div>@Html.TextBoxFor(model => model.printFlag, new { id = "printFlag", type = "hidden" })</div>
                }
            </div>
            <div class="col-md-12" style="border-top: 1px solid;">
                <input type="submit" id="CLEAR" value="CLEAR" class="btn btn-primary btn-lg" style="height:40px; width: 100px; margin-bottom:10px;margin-top:10px;" onclick="ClearSlit()" />&nbsp;&nbsp;
                <input type="button" id="BACK" value="BACK" class="btn btn-primary btn-lg" style="height:40px; width: 100px; margin-bottom:10px;margin-top:10px;" onclick="gotoPage('Index','Scanner','');" />
            </div>
        </td>
    </tr>
</table>
<script type="text/javascript">
     $('#input').keydown(function (event) {
        if (event.keyCode == 9) {
            $("#frmMain").submit();
        }
    });

    $('#inputSlitNumber').keyup(function (){
        $("#frmMain").submit();
    });

    function reloadSlit()
    {
        $("#frmMain").submit();
    }

    function ClearSlit()
    {
        $('#input').val('');
        $('#inputSlitNumber').val('');
        $('#slitWidth').val(0);
        $("#frmMain").submit();
    }

    function PrintSlitLabel()
    {
        var mywindow = window.open('', 'PRINT', 'height=600,width=800');
        mywindow.document.write('<html><head><title>SLIT LABEL PRINT PREVIEW (Print By:@loginUserName)</title>');
        mywindow.document.write('</head><body>');
        mywindow.document.write('<table>');

        mywindow.document.write('@if (Model.QRcodes != null){for (int i = 0; i < Model.CoilSlitLabels.Count; i++){<tr><td>@Html.Raw(Model.QRcodes[i])</td><td style="font-size:200%;">Slit Label: @Html.Raw(Model.CoilSlitLabels[i])</td></tr>}}');

        mywindow.document.write('</table>');

        mywindow.document.write('</body></html>');
        mywindow.document.close();
        mywindow.focus();
        mywindow.print();
        mywindow.close();
        $('#printFlag').val('print');
        $("#frmMain").submit();
    }


</script>